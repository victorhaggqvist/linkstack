function loadtitle(){var a=$("#url"),b=$("#title");a.val().length>10&&$.ajax({url:"core/getpagetitle.php",data:{url:a.val()},beforeSend:function(){b.addClass("loading")},complete:function(){b.removeClass("loading")},success:function(a){b.val(a)}})}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}function hideNotification(){var a=$("#notify");a.slideUp("slow"),a.removeClass("alert-success"),clearTimeout(hideNotificationStore)}function putRecent(a,b,c){var d=new Date,e=d.getFullYear(),f=d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1,g=d.getDate()<10?"0"+d.getDate():d.getDate(),h=d.getHours()<10?"0"+d.getHours():d.getHours(),i=d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes(),j=e+"-"+f+"-"+g+" "+h+":"+i,k='<tr><td><img src="https://www.google.com/s2/favicons?domain='+a+'" alt="fav"><a class="title" href="'+a+'">'+a+'</a></td><td title="'+b+'">'+b+"</td><td>"+c+"</td><td>"+j+'</td><td class="action"><button type="button" class="btn btn-default btn-sm delete-btn" data-id=""><span class="glyphicon glyphicon-trash"></span></button></td></tr>';$("#recentlist tbody").prepend(k)}function hasUri(a){var b=/([a-öA-Ö]+)([:]{1})([\/]{2})(.+)/;return b.test(a)?!0:!1}$("#url").keyup(loadtitle).change(loadtitle).mouseout(loadtitle),$(".delete-btn").click(function(){var a=$(this).attr("data-id"),b=$(this).parent().parent();$.ajax({url:"./api.php",data:{method:"delete",token:getCookie("token"),id:a},type:"POST",beforeSend:function(){},success:function(a){1==a?b.remove():console.log("fail")}})}),$("#push-it").click(function(a){a.preventDefault();var b=$("#push-it"),c=$("#url"),d=$("#title"),e=$("#tags"),f=$("#notify"),g=hasUri(c.val())?c.val():"http://"+c.val();console.log("ws: "+g),g.length>10&&(console.log("in"),$.ajax({url:"./api.php",data:{method:"new",token:getCookie("token"),url:g,title:d.val(),tags:e.val()},type:"POST",beforeSend:function(){b.html("Pushing..."),b.prop("disabled",!0)},success:function(a){$("#woop").html(a),1==a?($("#notify-text").html(g+" stashed!"),f.addClass("alert-success"),$("#notify").slideDown("slow"),putRecent(g,d.val(),e.val())):($("#notify-text").html("Some thing went wrong.. try again"),f.addClass("alert-warning"),f.slideDown("slow")),hideNotificationStore=setTimeout(hideNotification,5e3)},complete:function(){b.html("Push It!"),b.prop("disabled",!1),c.val(""),d.val(""),e.val("")}}))});var hideNotificationStore;